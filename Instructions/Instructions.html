<!DOCTYPE html> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"> 
<body> 
<h1>Using H5FDdsmSender</h1> 
<hr>
<p>when compiling the different source files to use H5FDdsm the following environment variables should be set:
</p>
<pre>
export CPPFLAGS=-fPIC
export CFLAGS=-fPIC
export CXXFLAGS=-fPIC
</pre>
<!-- to get libraries usable inside a block -->
<p>Then follow the instructions <a href="https://bitbucket.org/ejans/h5fddsm_instructions">here</a>.

<p>When compiling hdf5-vfd check the following:</p>
<pre>
BUILD_SHARED_LIBS 	ON
CMAKE_CXX_FLAGS         -fPIC
CMAKE_C_FLAGS           -fPIC
</pre>
<p>Copy the lua script from the BUP folder to the microblx environment:</p>
<pre>
cp BUP/hdf5Send.lua ../../
</pre>
<p>Make the microblx: </p>
<pre>
cd ~/microblx
make -j4
</pre>
<p>Now check the variables in the makefile and make H5FDdsmSender:</p>
<pre>
cd ~/std_blocks/H5FDdsmSender
<var>Your_Favorite_Editor</var> Makefile
.
.
make -j4
</pre>
<p>If we want to use the block we need to set another environment variable.</p>
<p>Look at the needed libraries:</p>
<pre>
ldd H5FDdsmSender.so
</pre>
<p>We need to set the LD_LIBRARY path:</p>
<pre>
export LD_LIBRARY_PATH=/home/<var>User</var>/h5fddsm/h5fddsm-0.9.9/build/bin/:/usr/local/lib/
<pre>
<p>Or for the youbot we need to create links for some libraries because luajit is runnig as root:</p>
<pre>
cd /usr/local/lib
sudo ln -s /home/<var>User</var>/h5fddsm/h5fddsm-0.9.9/build/bin/libH5FDdsm.so.0.9.9
sudo ln -s /home/<var>User</var>/local/lib/libhdf5.so.7.3.0
sudo ln -s /home/<var>User</var>/local/lib/libmpl.so.1
sudo ldconfig
</pre>
</body>
</html>
